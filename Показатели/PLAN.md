# План работ (актуализация)

Контекст сейчас:
- Источник данных: Google Sheet (ручной ввод), листы ИТОГО-25 и ИТОГО-26.
- Yclients не используем на этом этапе.
- Филиалы: СС, МП, СМ, ЧЕ, ЧК. СУМ = итог, игнорируем.
- Цель этапа: довести загрузку в БД + начать дашборды в отдельном проекте.

## Этап 0. Контракт данных
1) Зафиксировать термины (конфликты: «Еда», «Кофе/Кофе-чай-какао», «Напитки/Напитки ритейл», «Порча/Списание», «Выручка общая»).
2) В Sheet должны быть колонки `metric_code` и `source` (уже проставлены).
3) В Sheet должны быть строки `coffee_checks` и `load_percent` (load_percent пока можно 0).

## Этап 1. Синк Sheet -> БД
1) Выбрать БД для среды разработки: локальный SQLite или локальный Postgres.
2) Настроить подключение к внешней БД (как в основном проекте).
3) Прогнать импорт за 2025 и 2026, сверить объёмы и даты.

## Этап 2. Интеграция в проект дашбордов
1) Подключить новую БД/схему в существующий проект.
2) Создать отдельную вкладку «Коворкинг + Кофейня».
3) Держать разработку автономно, без вмешательства в другие модули.

## Этап 3. Дашборды (последовательно, по одному)
D1. Таблица «Данные месяца» (days×metrics + итоги недели/месяца + план)
D2. Недели: динамика по направлениям (4 графика)
D3. Лаборатория ↔ Общий зал (ratio)
D4. Загрузка ↔ деньги (line + scatter)
D5. Коворкинг ↔ кофейня (line + scatter)
D6. Сигналы (таблица)

Для каждого D*:
- собрать запросы/агрегации,
- сверить с исходными цифрами,
- отрисовать,
- вместе проверить и подправить.

## Этап 4. Интеграция в основное приложение
1) Встраивание вкладки в основной интерфейс.
2) Проверка на боевой БД.
3) Финальная фиксация доступа и прав.
