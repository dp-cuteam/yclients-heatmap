
визуальное ТЗ (MVP) на один экран, с чёткой очередностью блоков, что под чем, и в какой форме показывать. Я намеренно не усложняю, без экспортов, без лишних долей, только необходимое. Учёл критично важное: дни в столбцах, статьи в строках + окошки для ручного ввода планов на месяц.

0) Шапка страницы (фиксированная, sticky)

Строка 0.1 — Заголовок и фильтры

Заголовок: Дашборд / Коворкинг + Кофейня

Фильтры (в одну строку):

Филиал (если один — скрыть)

Месяц (выбор месяца)

Переключатель масштаба: Дни (по умолчанию) / Недели

Кнопка: Пересчитать (если есть серверная агрегация; иначе скрыть)

Строка 0.2 — Легенда

Маленькая легенда: значки “Итог недели”, “Итог месяца”, “План”.

1) Блок “Данные месяца” (главный, сверху, таблица days×metrics)

Это обязательный блок, вы просили: сами данные на этом же экране.
Форма: таблица, где колонки = дни месяца (1..31), строки = статьи (показатели).

1.1 Таблица “Факт” (основная)

Структура таблицы:

Колонки:

Показатель (название строки)

Ед. (руб / шт / %)

01 … 31 (все дни месяца)

после каждого воскресенья (или конца недели) — колонка Итого неделя

последняя колонка — Итого месяц

Строки (в строгом порядке, группами с заголовками-секциями):

Группа A. Коворкинг — выручка (руб)

Аренда общий зал (revenue_open_space)

Аренда кабинеты (revenue_cabinets)

Лаборатория (revenue_lab)

Ритейл (revenue_retail)

Группа B. Загрузка ( % )
5) Загрузка площадки % (load_percent)

Группа C. Кофейня — факт (руб/шт)
6) Кофейня выручка всего (coffee_revenue_total)
7) Кофейня чеки (checks)
8) Кофейня средний чек (avg_check) (если считаете — можно показывать, если нет — убрать)
9) Кофейня списание еды (written_off_food_total)
10) Кофейня продано еды всего (sold_food_total)

Группа D. Кофейня — категории (руб)
11) Кофе/горячие (revenue_coffee_hot)
12) Холод. напитки (revenue_drinks_cold)
13) Десерты (revenue_desserts)
14) Еда (revenue_food)

Поведение “Итогов недели”:

Для рублёвых строк: сумма за неделю

Для % загрузки: среднее за неделю

Для avg_check: среднее за неделю (или пересчёт как сумма выручки / сумма чеков — лучше так)

1.2 Мини-блок “План” (встроенные окошки ручного ввода)

Сразу справа от Итого месяц добавьте 2 колонки:

План месяц (ручной ввод)

Факт vs План (авто: % выполнения и отклонение)

План вводится по ключевым строкам, не по всем, чтобы MVP не раздувать.

Плановые строки (минимум):

Аренда общий зал

Аренда кабинеты

Лаборатория

Ритейл

Кофейня выручка всего

(опционально) Кофейня чеки

Ввод: обычные input-поля (руб/шт), сохраняются.

2) Под таблицей: “Структурирование и аналитика” (MVP, строго по вашим связям)

Ниже таблицы — компактные блоки в таком порядке:

2.1 Блок “Недели: динамика по направлениям” (4 маленьких графика)

Форма: 4 карточки-графика в ряд (если экран узкий — 2×2).
Каждый график показывает недельные суммы за выбранный месяц (и рядом маркер прошлых 4 недель при переключателе).

Карточки:

Аренда общий зал — по неделям

Кабинеты — по неделям

Лаборатория — по неделям

Ритейл — по неделям

Без долей, без микса. Только динамика.

2.2 Блок “Лаборатория ↔ Общий зал” (главный индикатор)

Форма: один широкий график (на всю ширину):

линия lab_to_open_space_ratio = revenue_lab / revenue_open_space

ось X: недели (или дни при переключателе)

рядом маленькая подпись текущего значения и изменения к прошлой неделе/к среднему 8 недель

Это единственное соотношение, которое вы оставили — так и делаем.

2.3 Блок “Загрузка ↔ Деньги (триггеры)” (минимально)

Форма: одна карточка с двумя мини-видами:

слева: линейный график по дням: load_percent + revenue_open_space (на двух осях или нормализовано в индексы 100=среднее месяца — на MVP можно индексы)

справа: маленькая scatter-диаграмма load_percent ↔ revenue_open_space (точки дня)

Важно: без “корреляций в цифрах” на MVP. Только визуально + триггер.

2.4 Блок “Коворкинг ↔ Кофейня” (межблочная связь)

Форма: одна карточка:

слева: по дням load_percent + coffee_revenue_total (как в 2.3)

справа: scatter load_percent ↔ coffee_revenue_total

Цель: быстро увидеть “есть загрузка, а кофейня не реагирует”.

2.5 Блок “Сигналы” (таблица-список, MVP)

Форма: таблица сигналов под графиками.

Колонки:

Сигнал

Где (коворкинг/кофейня)

Показатель

Период (неделя/4 недели)

Отклонение

Статус (новый/в работе/ок)

Строки сигналов — строго ваши 4 типа (и для кофейни аналогично):

Падение выручки направления (отдельно по каждому: open/cabinets/lab/retail)

Падение lab_to_open_space_ratio

Высокая загрузка + низкая выручка (open_space)

Высокая загрузка + слабая кофейня

Плюс кофейня-специфичные сигналы (из вашего ТЗ, MVP):

падение revenue_total кофейни

падение checks

падение avg_check (если используете)

рост writeoff_rate_food (если считаете)

Важно: список сигналов на MVP можно показывать только за текущий месяц и последние 4 недели.

3) Переключатель “Дни / Недели” (как влияет на экран)

Дни (по умолчанию):

Таблица факта показывает дни 1..31 + итоги недель + итого месяца

Графики 2.3 и 2.4 — по дням

Графики 2.1 и 2.2 — по неделям (это нормально, они агрегирующие)

Недели:

Таблица факта становится компактнее: колонки = недели месяца (+ итого месяца)

Графики остаются недельными (2.1, 2.2) и scatter строятся по неделям (точка = неделя) — опционально, можно оставить дневные scatter даже в режиме “Недели”, чтобы не усложнять.

4) Что НЕ делаем в MVP (фиксируем, чтобы не раздули)

Нет экспортов/выгрузок

Нет “долей” по направлениям коворкинга, кроме lab/open

Нет сложных корреляций/регрессий/коэффициентов

Нет drill-down до чеков/товаров

Нет прогнозов, кроме ручного плана на месяц

Нет сравнения филиал↔филиал

5) Мини-правила для дизайнеров (чтобы таблица “жила”)

Таблица должна быть горизонтально скроллируемой, но:

колонка Показатель фиксируется слева (sticky)

“Итого неделя” визуально отделять тонкой вертикальной линией

“Итого месяц” и “План” — выделить фоном

Внутри таблицы:

отрицательные отклонения (ниже порога) помечать маленьким маркером/значком (без “тепловых карт” на MVP, чтобы не усложнять)

Для полей “План месяц”:

простые input

сохранение по blur/enter