"""
Reference dictionaries for branches, raw labels, and metric mapping.
Uses ASCII-only source by encoding Cyrillic strings with unicode escapes.
"""

BRANCHES = [
    {"code": "\u0421\u0421", "name": "\u0428\u0435\u043b\u0435\u043f\u0438\u0445\u0430 (\u0428\u0435\u043b\u0435\u043f\u0438\u0445\u0438\u043d\u0441\u043a\u0430\u044f \u043d\u0430\u0431\u0435\u0440\u0435\u0436\u043d\u0430\u044f, 34\u043a4)", "yclients_id": None},
    {"code": "\u041c\u041f", "name": "\u041c\u0430\u0442\u0447 \u041f\u043e\u0438\u043d\u0442 (\u0443\u043b. \u0412\u0430\u0441\u0438\u043b\u0438\u0441\u044b \u041a\u043e\u0436\u0438\u043d\u043e\u0439 \u0434.13)", "yclients_id": None},
    {"code": "\u0421\u041c", "name": "\u0421\u0438\u043c\u0432\u043e\u043b (\u0428\u043e\u0441\u0441\u0435 \u042d\u043d\u0442\u0443\u0437\u0438\u0430\u0441\u0442\u043e\u0432 \u0434.3 \u043a. 1)", "yclients_id": None},
    {"code": "\u0427\u0415", "name": "CUTEAM \u0421\u041f\u0431 (\u043c. \u0427\u0435\u0440\u043d\u044b\u0448\u0435\u0432\u0441\u043a\u0430\u044f)", "yclients_id": None},
    {"code": "\u0427\u041a", "name": "CUTEAM \u0421\u041f\u0431 (\u043c. \u0427\u043a\u0430\u043b\u043e\u0432\u0441\u043a\u0430\u044f)", "yclients_id": None},
]

YCLIENTS_BRANCH_IDS = [
    "1237989",
    "1224689",
    "1213086",
    "1224674",
    "1237988",
]

IGNORE_BRANCH_CODES = [
    "\u0421\u0423\u041c",
]

IGNORE_LABELS = [
    "\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0439 \u0441\u043b\u043e\u0442",
    "\u041b\u0430\u043a\u043e\u043c\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u0441\u043e\u0431\u0430\u043a",
    "\u0417\u0430\u0442\u0440\u0430\u0442\u044b \u043a\u043e\u0444\u0435\u0439\u043d\u0438",
    "\u041f\u043e\u0434\u0430\u0440\u043e\u043a \u0433\u043e\u0441\u0442\u044e",
    "\u0420\u0430\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b",
    "\u0425\u043e\u0437. \u0440\u0430\u0441\u0445\u043e\u0434\u044b",
    "\u041f\u0440\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0430",
    "\u041f\u0438\u0442\u0430\u043d\u0438\u0435 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u043e\u0432",
]

RAW_METRIC_LABELS = [
    "\u043e\u0441\u0442\u0430\u0442\u043e\u043a \u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0445 \u043d\u0430 \u043a\u043e\u043d\u0435\u0446 \u0434\u043d\u044f",
    "\u0438\u0437 \u043d\u0438\u0445 \u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0435",
    "\u0438\u0437 \u043d\u0438\u0445 \u0431\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0435",
    "\u0412\u044b\u0440\u0443\u0447\u043a\u0430",
    "\u0410\u0440\u0435\u043d\u0434\u0430",
    "\u041a\u0430\u0431\u0438\u043d\u0435\u0442\u044b",
    "\u041b\u0435\u043a\u0442\u043e\u0440\u0438\u0439",
    "\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u0438\u044f",
    "\u0420\u0438\u0442\u0435\u0439\u043b",
    "\u0423\u0441\u043b\u0443\u0433\u0438 \u0441\u0430\u043b\u043e\u043d\u0430",
    "\u041a\u043e\u0444\u0435\u0439\u043d\u044f",
    "\u0415\u0434\u0430",
    "\u0414\u0435\u0441\u0435\u0440\u0442\u044b",
    "\u0415\u0434\u0430 \u0437\u0430\u0432\u0442\u0440\u0430\u043a\u0438",
    "\u0415\u0434\u0430 \u043e\u0431\u0435\u0434\u044b",
    "\u041a\u0440\u0443\u0430\u0441\u0441\u0430\u043d\u044b",
    "\u0421\u0430\u043b\u0430\u0442\u044b",
    "\u0421\u044d\u043d\u0434\u0432\u0438\u0447\u0438",
    "\u041d\u0430\u043f\u0438\u0442\u043a\u0438",
    "\u041a\u043e\u0444\u0435",
    "\u041a\u043e\u0444\u0435/\u0447\u0430\u0439/\u043a\u0430\u043a\u0430\u043e",
    "\u041d\u0430\u043f\u0438\u0442\u043a\u0438 \u0440\u0438\u0442\u0435\u0439\u043b",
    "\u0421\u0435\u0437\u043e\u043d\u043d\u044b\u0435 \u043d\u0430\u043f\u0438\u0442\u043a\u0438",
    "\u041f\u043e\u0440\u0447\u0430",
    "\u0418\u0437\u044a\u044f\u0442\u0438\u044f",
    "\u0417\u041f \u043a\u043b\u0438\u043d\u0438\u043d\u0433",
    "\u0417\u041f \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b",
    "\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0440\u0435\u043c\u043e\u043d\u0442",
    "\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u044f",
    "\u041a\u0443\u0440\u044c\u0435\u0440, \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430, \u0442\u0430\u043a\u0441\u0438",
    "\u0417\u0430\u043a\u0443\u043f\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432",
    "\u0420\u0430\u0441\u0445\u043e\u0434\u044b \u043d\u0430 \u043c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433",
    "\u0420\u0430\u0441\u0445\u043e\u0434\u044b \u043d\u0430 \u043d\u0430\u0439\u043c",
    "\u0418\u043d\u043a\u0430\u0441\u0441\u0430\u0446\u0438\u044f",
    "\u041f\u0440\u043e\u0447\u0435\u0435",
]

RAW_LABEL_TO_METRIC_CODE = {
    "\u043e\u0441\u0442\u0430\u0442\u043e\u043a \u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0445 \u043d\u0430 \u043a\u043e\u043d\u0435\u0446 \u0434\u043d\u044f": "cash_balance_end_day",
    "\u0438\u0437 \u043d\u0438\u0445 \u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0435": "revenue_cash",
    "\u0438\u0437 \u043d\u0438\u0445 \u0431\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0435": "revenue_cashless",
    "\u0412\u044b\u0440\u0443\u0447\u043a\u0430": "revenue_total",
    "\u0410\u0440\u0435\u043d\u0434\u0430": "revenue_open_space",
    "\u041a\u0430\u0431\u0438\u043d\u0435\u0442\u044b": "revenue_cabinets",
    "\u041b\u0435\u043a\u0442\u043e\u0440\u0438\u0439": "revenue_lecture",
    "\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u0438\u044f": "revenue_lab",
    "\u0420\u0438\u0442\u0435\u0439\u043b": "revenue_retail",
    "\u0423\u0441\u043b\u0443\u0433\u0438 \u0441\u0430\u043b\u043e\u043d\u0430": "revenue_salon",
    "\u041a\u043e\u0444\u0435\u0439\u043d\u044f": "coffee_revenue_total",
    "\u0415\u0434\u0430": "sold_food_total",
    "\u0414\u0435\u0441\u0435\u0440\u0442\u044b": "revenue_desserts",
    "\u0415\u0434\u0430 \u0437\u0430\u0432\u0442\u0440\u0430\u043a\u0438": "revenue_food_breakfast",
    "\u0415\u0434\u0430 \u043e\u0431\u0435\u0434\u044b": "revenue_food_lunch",
    "\u041a\u0440\u0443\u0430\u0441\u0441\u0430\u043d\u044b": "revenue_food_croissants",
    "\u0421\u0430\u043b\u0430\u0442\u044b": "revenue_food_salads",
    "\u0421\u044d\u043d\u0434\u0432\u0438\u0447\u0438": "revenue_food_sandwiches",
    "\u041d\u0430\u043f\u0438\u0442\u043a\u0438": "revenue_drinks_total",
    "\u041a\u043e\u0444\u0435": "revenue_coffee",
    "\u041a\u043e\u0444\u0435/\u0447\u0430\u0439/\u043a\u0430\u043a\u0430\u043e": "revenue_coffee_hot",
    "\u041d\u0430\u043f\u0438\u0442\u043a\u0438 \u0440\u0438\u0442\u0435\u0439\u043b": "revenue_drinks_cold",
    "\u0421\u0435\u0437\u043e\u043d\u043d\u044b\u0435 \u043d\u0430\u043f\u0438\u0442\u043a\u0438": "revenue_drinks_seasonal",
    "\u041f\u043e\u0440\u0447\u0430": "written_off_food_total",
    "\u0418\u0437\u044a\u044f\u0442\u0438\u044f": "withdrawals_total",
    "\u0417\u041f \u043a\u043b\u0438\u043d\u0438\u043d\u0433": "expense_cleaning_salary",
    "\u0417\u041f \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b": "expense_staff_salary",
    "\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0440\u0435\u043c\u043e\u043d\u0442": "expense_maintenance",
    "\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u044f": "expense_facility",
    "\u041a\u0443\u0440\u044c\u0435\u0440, \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0430, \u0442\u0430\u043a\u0441\u0438": "expense_delivery_taxi",
    "\u0417\u0430\u043a\u0443\u043f\u043a\u0430 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432": "expense_food_purchase",
    "\u0420\u0430\u0441\u0445\u043e\u0434\u044b \u043d\u0430 \u043c\u0430\u0440\u043a\u0435\u0442\u0438\u043d\u0433": "expense_marketing",
    "\u0420\u0430\u0441\u0445\u043e\u0434\u044b \u043d\u0430 \u043d\u0430\u0439\u043c": "expense_hiring",
    "\u0418\u043d\u043a\u0430\u0441\u0441\u0430\u0446\u0438\u044f": "expense_cash_collection",
    "\u041f\u0440\u043e\u0447\u0435\u0435": "expense_other",
    "\u0427\u0435\u043a\u0438": "coffee_checks",
    "\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430": "load_percent",
}

EXTRA_INPUT_METRICS = {
    "load_percent": {
        "label": "\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043f\u043b\u043e\u0449\u0430\u0434\u043a\u0438 %",
        "unit": "pct",
        "group": "coworking",
    },
    "coffee_checks": {
        "label": "\u0427\u0435\u043a\u0438 (\u043a\u043e\u0444\u0435\u0439\u043d\u044f)",
        "unit": "qty",
        "group": "coffee",
    },
    "revenue_lecture_bank": {
        "label": "\u0412\u044b\u0440\u0443\u0447\u043a\u0430 \u043d\u0430 \u0440/\u0441 \u043e\u0442 \u043b\u0435\u043a\u0442\u043e\u0440\u0438\u044f",
        "unit": "rub",
        "group": "coworking",
    },
}

COFFEE_CATEGORY_LABELS = {
    "revenue_coffee_hot": [
        "\u041a\u043e\u0444\u0435/\u0447\u0430\u0439/\u043a\u0430\u043a\u0430\u043e",
        "\u0421\u0435\u0437\u043e\u043d\u043d\u044b\u0435 \u043d\u0430\u043f\u0438\u0442\u043a\u0438",
        "\u041a\u043e\u0444\u0435",
    ],
    "revenue_drinks_cold": [
        "\u041d\u0430\u043f\u0438\u0442\u043a\u0438 \u0440\u0438\u0442\u0435\u0439\u043b",
    ],
    "sold_food_total": [
        "\u0415\u0434\u0430",
        "\u0414\u0435\u0441\u0435\u0440\u0442\u044b",
        "\u0415\u0434\u0430 \u0437\u0430\u0432\u0442\u0440\u0430\u043a\u0438",
        "\u0415\u0434\u0430 \u043e\u0431\u0435\u0434\u044b",
        "\u0421\u0430\u043b\u0430\u0442\u044b",
        "\u0421\u044d\u043d\u0434\u0432\u0438\u0447\u0438",
        "\u041a\u0440\u0443\u0430\u0441\u0441\u0430\u043d\u044b",
    ],
    "revenue_desserts": [
        "\u0414\u0435\u0441\u0435\u0440\u0442\u044b",
    ],
}

DERIVED_METRICS = {
    "avg_check": {
        "label": "\u0421\u0440\u0435\u0434\u043d\u0438\u0439 \u0447\u0435\u043a",
        "unit": "rub",
        "group": "coffee",
        "depends_on": ["coffee_revenue_total", "coffee_checks"],
        "formula": "coffee_revenue_total / coffee_checks",
    },
    "lab_to_open_space_ratio": {
        "label": "\u041b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u0438\u044f / \u043e\u0431\u0449\u0438\u0439 \u0437\u0430\u043b",
        "unit": "ratio",
        "group": "coworking",
        "depends_on": ["revenue_lab", "revenue_open_space"],
        "formula": "revenue_lab / revenue_open_space",
    },
    "writeoff_rate_food": {
        "label": "\u0414\u043e\u043b\u044f \u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0439 \u0435\u0434\u044b",
        "unit": "ratio",
        "group": "coffee",
        "depends_on": ["written_off_food_total", "sold_food_total"],
        "formula": "written_off_food_total / (sold_food_total + written_off_food_total)",
    },
}

RAW_METRIC_CODES = [RAW_LABEL_TO_METRIC_CODE[label] for label in RAW_METRIC_LABELS]
ALL_METRIC_CODES = (
    RAW_METRIC_CODES + list(EXTRA_INPUT_METRICS.keys()) + list(DERIVED_METRICS.keys())
)
