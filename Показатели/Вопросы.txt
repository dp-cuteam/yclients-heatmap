Вопросы, чтобы двигаться дальше

  1. Филиалы и маппинг.
     В таблице нашёл коды блоков: СС, МП, СМ, ЧЕ, ЧК, и отдельный СУМ.
     Нужна таблица соответствия:
     код блока → название филиала → branch_id (Yclients)
     Сейчас строка 12379891224689121308612246741237988 без разделителей — пришлите списком, кто есть кто.
  2. Нужна ли отдельная колонка филиала?
     Сейчас филиал определяется заголовком блока. Мы можем:

  - либо оставить как есть и парсить по блокам (проще для вас),
  - либо добавить явную колонку branch_code.
    Как предпочитаете?

  3. Какие строки берём в MVP?
     В блоках много строк (выручка, аренда, кофе, затраты, изъятия и т.д.).
     Хотите все строки превращать в metric_code, или только ограниченный набор (как в ТЗ)?
  4. “Продано еды всего” и списания.
     В таблице есть строка Еда (итого по еде), а также Порча.
     Правильно ли:

  - sold_food_total = строка Еда
  - written_off_food_total = строка Порча
    Если нет — уточните.

  5. Кофейные категории.
     В таблице есть: Кофе, Кофе/чай/какао, Сезонные напитки, Напитки ритейл, Напитки, Десерты, Еда.
     Как это маппим на ваши метрики:
     revenue_coffee_hot, revenue_drinks_cold, revenue_desserts, revenue_food?
  6. Процент загрузки.
     Как назвать строку и код? Формат значения — 0–100 или 0–1?
     Нужен ли по каждому филиалу ежедневно?
  7. Строки “Свободный слот”, “остаток наличных”, “из них наличные/безналичные”.
     Сохраняем как метрики или игнорируем?

  ———

  Если ок, я дальше:

  1. фиксирую финальную спецификацию строк/кодов (под ваш ответ),
  2. проектирую схему SQLite (date, branch_code, metric_code, value, source, updated_at),
  3. делаю парсер Sheet → SQLite с учетом блоков и игнором недель/месяцев.

  Ответьте на пункты выше — и можно стартовать.

ОТВЕТЫ:

Филиалы (названия их затяни сам и сохрани)
#1237989
#1224689
#1213086 
#1224674
#1237988

инструкция api yclients C:\Codex\Показатели\developers.yclients.com-2026-01-19.md

Филиалы. Значит, сопоставление аббревиатуры с кодом Y-Clients дам отдельно. СМЭ это Coworking Metro Площадь Тереча или Символ. Значит, МП это Coworking Metro Парк Победы или Match Point. И СС это каворкинг метро Шелепиха или Сердце столицы. Есть еще, соответственно, каворкинг Че. Это Санкт-Петербург метро Чернышевская. И ЧК это Санкт-Петербург метро Чкаловская.

Я не против выделения дополнительных колонок в начале таблицы технических. Бранч-код. Они не будут мешать сильно для оператора. Мы их можем сделать очень маленькими. Внутри будет содержаться код, если это как-то обеспечит большую надежность системы.

значит какие строки берем в мвп берем все строки в мвп как планировали значит вот филиал каждый филиал значит сводим всего выручку общую выручка собирается из двух основных направлений это арендное направление и кофейня соответственно выручка это аренда + кофейни выручка делится на наличную и безналичную безналичная это по картам наличная в кассе наличные соответственно мы разделяем выручка всего из них наличных них безналичные дальше идет у нас арендное основное направление по подразделениям его разбиваем на следующий блоке значит аренда кабинеты лекторий лаборатория ритейл и салон это те блоки которые мы контролируем внутри вот самого арендного бизнеса значит повторяя аренда кабинет и лекторий лабораторий ритейл салон следующем подраздел нас идет кофейня в кофейне мы собираем следующие общая выручка по кафе десерты еда завтраки еда обеды кофе как кофе чай какао горячие напитки значит отдельно круассаны напитки ритейл это у нас напитки с холодильника салаты сезонные напитки и сэндвичи вот это мы собрали по подразделениям кафе кроме того у нас есть еще порча это списание мы ее тоже отдельно собираем все это блок кофейни теперь у нас есть еще блок изъятия это деньги которые мы берем из на из кассы наличных соответственно изъятия следующих типов у нас бывают и это тоже мы в таблице вносим зарплата клининга зарплата персонала текущий ремонт содержание помещения курьер доставка такси закупка продуктов расходы на маркетинг расходы на найм самоинкассация и прочее вот по этим строчкам мы также каждый день раскидываем сколько налички взяли и еще у нас есть такой показатель как выручка на расчетный счет от лектория то есть это мимо кассы когда проходит по безналу нам юридические лица платят за лекторий тоже бухгалтер вставляет эти цифры вот это все нужно собрать кроме того вот у нас есть строки которые мы типа не нашли до в этой структуре их нужно добавить в каждое кафе нужно добавить количество чеков и у нас еще вроде все количество чеков да и у нас еще есть загрузка коворкинга который мы из другой части программы будем забирать когда с интегрируем два модуля

значит уточняю еще раз писание это и есть порча вот то есть это она это одно и то же можно написать списание так всем понятнее что значит еще мы продана еды всего это сумма всей еды да то есть в и к еде относятся у нас все что не напитки напитки это кофе кофе чай какао но это как бы такое подразделение где не совсем кофейные напитки ну то есть не простые там она от не занесены в этот в этот раздел сезонные напитки напитки retail это напитки все остальное это еда десерты завтраки сэндвичи там салат и все что я перечислял суета

процент загрузки у нас 0100 назвать ну это в раздел где аренда вот можно написать ну туда же подтягивать это загрузка филиала арендой мы это уже умеем считать автоматически поэтому просто это туда будем спускать не вручную заполнять

Значит, свободный свод не нужно ничего, значит остаток наличных, это что такое? Вот у нас вчера был остаток наличных, сегодня появилась выручка наличная в кафе, наличная в салоне, и эта наличная выручка прибавляется к вчерашним показателям остатка наличных. а сегодняшние затраты из наличных в которой в изъятиях вычитаются и у нас всегда видно сколько у нас всего налички на каждом филиале в двух кассах да то есть детализировать не вижу смысла пусть вот в таком виде это будет и