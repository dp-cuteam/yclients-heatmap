<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CUTEAM · Теплокарта</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <div class="shell">
      <header class="topbar">
        <div>
          <div class="eyebrow">CUTEAM</div>
          <h1>Теплокарта загрузки</h1>
          <p class="subtitle">Фактические визиты • YCLIENTS</p>
        </div>
        <div class="actions">
          <a class="ghost" href="/admin">Админка</a>
          <a class="ghost" href="/historical">Исторические данные</a>
          <form method="post" action="/logout">
            <button class="ghost" type="submit">Выйти</button>
          </form>
        </div>
      </header>

      <section class="filters">
        <div class="field">
          <label>Месяц</label>
          <select id="monthSelect"></select>
        </div>
        <div class="field">
          <label>Филиалы коворкинга</label>
          <select id="branchSelect"></select>
        </div>
      </section>

      <section class="heatmap-section">
        <div class="section-header">
          <h2>Месяц целиком (строки — время, столбцы — дни)</h2>
          <div class="legend">
            <span>0%</span>
            <div class="legend-bar"></div>
            <span>100%</span>
          </div>
          <div class="palette-switch">
            <label>
              <input type="radio" name="heatmapPalette" value="perceptual" />
              Perceptual
            </label>
            <label>
              <input type="radio" name="heatmapPalette" value="bgyor" />
              Сине‑зелёный‑жёлтый‑красный
            </label>
          </div>
        </div>
        <div class="data-status">
          <div class="status-lines">
            <div>Данные за: <strong id="dataMonth">—</strong></div>
            <div>Последнее обновление: <strong id="dataUpdated">—</strong></div>
            <div>Источник: <strong id="dataSource">—</strong></div>
            <div>Записей в агрегатах: <strong id="dataCount">—</strong></div>
            <div id="dataNote" class="data-note">—</div>
          </div>
          <button id="dataRefresh" class="ghost">Обновить</button>
        </div>
        <p class="subtitle">Разделители: после 9:00 и перед 22:00. Недели разделяются по понедельнику.</p>
        <div id="monthContainer" class="month-container"></div>
      </section>
    </div>

    <script>
      window.BRANCH_START_DATE = "{{ branch_start_date }}";
    </script>
    <script src="/static/app.js"></script>
  </body>
</html>

